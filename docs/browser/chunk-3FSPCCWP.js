import{a as I,c as N,g as q,l as B}from"./chunk-J3G5ZFI4.js";import{a as O}from"./chunk-NGS7TM23.js";import{Eb as d,Fa as v,Fb as h,Gb as w,Ha as c,Hb as u,Ib as C,Jb as y,Mb as M,Na as S,Nb as b,Ta as P,Z as s,_ as p,fc as T,gb as x,hb as f,hc as W,ib as V,jb as D,kb as E,lb as a,mb as o,nb as k,tb as g,vb as _,xb as m}from"./chunk-EPP6732M.js";var F=(l,n)=>n.id;function L(l,n){if(l&1){let t=g();a(0,"div",3)(1,"div",7),k(2,"img",8),a(3,"h4",9),d(4),o(),a(5,"p",10),d(6),M(7,"currency"),o(),a(8,"div",11)(9,"button",12),_("click",function(){let e=s(t).$implicit,i=m();return p(i.decreaseQuantity(e))}),d(10,"-"),o(),a(11,"span",13),d(12),o(),a(13,"button",12),_("click",function(){let e=s(t).$implicit,i=m();return p(i.increaseQuantity(e))}),d(14,"+"),o()(),a(15,"button",14),_("click",function(){let e=s(t).$implicit,i=m();return p(i.removeProduct(e))}),d(16,"Remove"),o()()()}if(l&2){let t=n.$implicit;c(2),E("src",t.image,v)("alt",t.title),c(2),h(t.title),c(2),h(b(7,5,t.price,"EGP")),c(6),h(t.quantity||1)}}function A(l,n){if(l&1){let t=g();a(0,"div")(1,"input",16),y("ngModelChange",function(e){s(t);let i=m(2);return C(i.paymentData.account,e)||(i.paymentData.account=e),p(e)}),o(),a(2,"textarea",17),y("ngModelChange",function(e){s(t);let i=m(2);return C(i.paymentData.instructions,e)||(i.paymentData.instructions=e),p(e)}),o()()}if(l&2){let t=m(2);c(),u("ngModel",t.paymentData.account),c(),u("ngModel",t.paymentData.instructions)}}function H(l,n){if(l&1){let t=g();a(0,"div")(1,"input",18),y("ngModelChange",function(e){s(t);let i=m(2);return C(i.paymentData.cardNumber,e)||(i.paymentData.cardNumber=e),p(e)}),o(),a(2,"input",19),y("ngModelChange",function(e){s(t);let i=m(2);return C(i.paymentData.expiryDate,e)||(i.paymentData.expiryDate=e),p(e)}),o(),a(3,"input",20),y("ngModelChange",function(e){s(t);let i=m(2);return C(i.paymentData.cvv,e)||(i.paymentData.cvv=e),p(e)}),o(),a(4,"input",21),y("ngModelChange",function(e){s(t);let i=m(2);return C(i.paymentData.cardHolder,e)||(i.paymentData.cardHolder=e),p(e)}),o()()}if(l&2){let t=m(2);c(),u("ngModel",t.paymentData.cardNumber),c(),u("ngModel",t.paymentData.expiryDate),c(),u("ngModel",t.paymentData.cvv),c(),u("ngModel",t.paymentData.cardHolder)}}function j(l,n){if(l&1){let t=g();a(0,"div",5)(1,"h5"),d(2),o(),x(3,A,3,2,"div"),x(4,H,5,4,"div"),a(5,"button",15),_("click",function(){s(t);let e=m();return p(e.confirmPayment())}),d(6,"Confirm Payment"),o()()}if(l&2){let t=m();c(2),w("Enter Payment Details (",t.paymentMethod,")"),c(),f(t.paymentMethod==="Vodafone Cash"||t.paymentMethod==="Orange Cash"?3:-1),c(),f(t.paymentMethod==="Visa"?4:-1)}}var Q=class l{constructor(n){this._cartService=n}productsArray=[];total=0;paymentMethod="";paymentData={};ngOnInit(){this.loadCart()}loadCart(){let n=this._cartService.getCart();this.productsArray=n?.products||[],this.calculateTotal()}removeProduct(n){this._cartService.deleteFromCart(n),this.loadCart()}increaseQuantity(n){let t=(n.quantity||1)+1,r=this._cartService.getCart()?.email||"";this._cartService.updateQuantity(n.id,r,t),this.loadCart()}decreaseQuantity(n){let t=(n.quantity||1)-1,r=this._cartService.getCart()?.email||"";t<=0?this.removeProduct(n):(this._cartService.updateQuantity(n.id,r,t),this.loadCart())}calculateTotal(){this.total=this.productsArray.reduce((n,t)=>n+t.price*(t.quantity||1),0)}selectPayment(n){this.paymentMethod=n,this.paymentData={}}confirmPayment(){console.log(`${this.paymentMethod} payment data:`,this.paymentData),alert(`${this.paymentMethod} payment confirmed!`)}static \u0275fac=function(t){return new(t||l)(S(O))};static \u0275cmp=P({type:l,selectors:[["app-cart"]],decls:20,vars:5,consts:[[1,"container","cart-container","my-4"],[1,"text-center","mb-4"],[1,"row","g-3"],[1,"col-md-3","product"],[1,"mt-4","text-center"],[1,"mt-3","text-center"],[1,"main-btn","mx-2",3,"click"],[1,"card","p-2","text-center"],["height","200","loading","lazy","decoding","async",1,"w-100",3,"src","alt"],[1,"fs-6","mt-2"],[1,"fw-bold"],[1,"quantity","d-flex","justify-content-center","align-items-center","my-2"],[1,"btn-qty",3,"click"],[1,"mx-2"],[1,"main-btn",3,"click"],[1,"main-btn","mt-3",3,"click"],["type","text","placeholder","Enter Number",1,"form-control","my-2",3,"ngModelChange","ngModel"],["placeholder","Enter Instructions",1,"form-control","my-2",3,"ngModelChange","ngModel"],["type","text","placeholder","Card Number",1,"form-control","my-2",3,"ngModelChange","ngModel"],["type","month",1,"form-control","my-2",3,"ngModelChange","ngModel"],["type","text","placeholder","CVV",1,"form-control","my-2",3,"ngModelChange","ngModel"],["type","text","placeholder","Card Holder Name",1,"form-control","my-2",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"h3",1),d(2,"Your Cart"),o(),a(3,"div",2),V(4,L,17,8,"div",3,F),o(),a(6,"div",4)(7,"h4"),d(8),M(9,"currency"),o()(),a(10,"div",5)(11,"h5"),d(12,"Select Payment Method"),o(),a(13,"button",6),_("click",function(){return r.selectPayment("Vodafone Cash")}),d(14,"Vodafone Cash"),o(),a(15,"button",6),_("click",function(){return r.selectPayment("Orange Cash")}),d(16,"Orange Cash"),o(),a(17,"button",6),_("click",function(){return r.selectPayment("Visa")}),d(18,"Visa"),o()(),x(19,j,7,3,"div",5),o()),t&2&&(c(4),D(r.productsArray),c(4),w("Total: ",b(9,2,r.total,"EGP")),c(11),f(r.paymentMethod?19:-1))},dependencies:[W,B,I,N,q,T],styles:[".product[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:10px;box-shadow:0 5px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.cart-container[_ngcontent-%COMP%]{padding-top:120px;min-height:calc(100vh - 120px);display:flex;flex-direction:column;justify-content:flex-start;gap:20px}.product[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.main-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff8c00,#ff3c3c);color:#fff!important;border:none;padding:8px 18px;border-radius:30px;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:5px}.main-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#ff3c3c,#ff8c00);transform:scale(1.05)}.btn-qty[_ngcontent-%COMP%]{background:#f0f0f0;border:none;padding:5px 10px;font-weight:700;border-radius:5px;cursor:pointer}.btn-qty[_ngcontent-%COMP%]:hover{background:#ff8c00;color:#fff;transform:scale(1.1)}"]})};export{Q as CartComponent};
