import{O as d,a as n,b as l}from"./chunk-U44EI4WO.js";var m=class u{constructor(){}creatCart(){localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify([]))}addToCart(t){let r=localStorage.getItem("cart"),a=localStorage.getItem("userData");if(r){let e=JSON.parse(r);if(a){let s=JSON.parse(a),c=e.find(i=>i.email===s.email);if(!c)e.push({email:s.email,products:[l(n({},t),{quantity:1})]});else{let i=c.products.find(o=>o.id===t.id);if(!i)c.products.push(l(n({},t),{quantity:1}));else{let o=c.products.findIndex(f=>f.id===t.id);c.products.splice(o,1,l(n({},i),{quantity:(i.quantity||0)+1}))}}localStorage.setItem("cart",JSON.stringify(e))}}}getCart(){let t=localStorage.getItem("userData"),r=localStorage.getItem("cart");if(t&&r){let a=JSON.parse(t);return JSON.parse(r).find(s=>s.email===a.email)}}getAllCarts(){let t=localStorage.getItem("cart");return t?JSON.parse(t):[]}deleteFromCart(t){let r=this.getCart();if(r){let a=r.products.filter(s=>s.id!==t.id),e=this.getAllCarts();e=e.filter(s=>s.email!==r.email),e.push(l(n({},r),{products:a})),localStorage.setItem("cart",JSON.stringify(e))}}clearCart(){let t=this.getCart();if(t){let r=this.getAllCarts();r=r.filter(a=>a.email!==t.email),r.push(l(n({},t),{products:[]})),localStorage.setItem("cart",JSON.stringify(r))}}updateQuantity(t,r,a){let e=this.getCart();if(e){let s=e.products.find(c=>c.id===t);if(s){s.quantity=a;let c=e.products.filter(o=>o.id!==t);c.push(s);let i=this.getAllCarts();i=i.filter(o=>o.email!==r),i.push(l(n({},e),{products:c})),localStorage.setItem("cart",JSON.stringify(i))}}}isInCart(t){let r=this.getCart();return r?r.products.some(a=>a.id===t):!1}static \u0275fac=function(r){return new(r||u)};static \u0275prov=d({token:u,factory:u.\u0275fac,providedIn:"root"})};export{m as a};
